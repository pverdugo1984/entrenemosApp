{
  "version": 3,
  "sources": ["src/app/features/admin/usuarios/usuarios.component.ts", "src/app/features/admin/usuarios/usuarios.component.html"],
  "sourcesContent": ["import { CommonModule, DatePipe } from \"@angular/common\";\r\nimport { Component, OnInit } from \"@angular/core\";\r\nimport { Usuario } from \"../../../shared/models/usuario\";\r\nimport { UsuariosService } from \"../../../core/services/usuarios.service\";\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: \"app-usuarios\",\r\n  standalone: true,\r\n  imports: [CommonModule, DatePipe],\r\n  templateUrl: \"./usuarios.component.html\",\r\n  styleUrl: \"./usuarios.component.css\",\r\n})\r\nexport class UsuariosComponent implements OnInit {\r\n  usuarios: Usuario[] = [];\r\n  cargando = true;\r\n  error: string | null = null;\r\n\r\n  constructor(\r\n    private usuarioService: UsuariosService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.cargarUsuarios();\r\n  }\r\n\r\n  cargarUsuarios() {\r\n    this.cargando = true;\r\n    this.error = null;\r\n\r\n    this.usuarioService.listarUsuarios().subscribe({\r\n      next: (data: Usuario[]) => {\r\n        console.log(\"Usuarios recibidos:\", data);\r\n        this.usuarios = data;\r\n        this.cargando = false;\r\n      },\r\n      error: (err) => {\r\n        console.error(\"Error cargando usuarios:\", err);\r\n        this.error =\r\n          err.error?.message ||\r\n          \"Error al cargar los usuarios. Verifica que tengas rol ADMIN.\";\r\n        this.cargando = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  eliminar(id: number) {\r\n    if (!confirm(\"¬øSeguro que quieres eliminar este usuario?\")) return;\r\n\r\n    this.usuarioService.eliminarUsuario(id).subscribe({\r\n      next: () => {\r\n        this.cargarUsuarios();\r\n        alert(\"Usuario eliminado con √©xito\");\r\n      },\r\n      error: (err) => {\r\n        console.error(\"Error eliminando usuario:\", err);\r\n        alert(\r\n          \"No se pudo eliminar el usuario: \" +\r\n            (err.error?.message || \"Error desconocido\")\r\n        );\r\n      },\r\n    });\r\n  }\r\n\r\n  editar(usuario: Usuario) {\r\n    this.router.navigate([\"/admin/usuarios\", usuario.id]);\r\n  }\r\n\r\n  crear() {\r\n    this.router.navigate([\"/admin/usuarios/nuevo\"]);\r\n  }\r\n}\r\n", "<div class=\"usuarios-admin-container\">\r\n  <div class=\"header-section\">\r\n    <h1>üë• Gesti√≥n de Usuarios</h1>\r\n    <button class=\"btn-nuevo\" (click)=\"crear()\">\r\n      ‚ûï Nuevo Usuario\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Mensaje de error -->\r\n  @if (error) {\r\n  <div class=\"error-message\">\r\n    <p>‚ùå {{ error }}</p>\r\n    <button class=\"btn-reintentar\" (click)=\"cargarUsuarios()\">\r\n      üîÑ Reintentar\r\n    </button>\r\n  </div>\r\n  }\r\n\r\n  <!-- Estado de carga -->\r\n  @if (cargando) {\r\n  <div class=\"loading-container\">\r\n    <div class=\"spinner\"></div>\r\n    <p>Cargando usuarios...</p>\r\n  </div>\r\n  }\r\n\r\n  <!-- Lista de usuarios -->\r\n  @if (!cargando && !error) {\r\n  <div class=\"usuarios-table-container\">\r\n    @if (usuarios.length === 0) {\r\n    <div class=\"sin-usuarios\">\r\n      <p>üì≠ No hay usuarios registrados</p>\r\n      <button class=\"btn-nuevo\" (click)=\"crear()\">\r\n        Crear el primero\r\n      </button>\r\n    </div>\r\n    } @else {\r\n    <table class=\"usuarios-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Nombre</th>\r\n          <th>Email</th>\r\n          <th>Tel√©fono</th>\r\n          <th>Fecha Registro</th>\r\n          <th>Rol</th>\r\n          <th>Acciones</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        @for (u of usuarios; track u.id) {\r\n        <tr>\r\n          <td>{{ u.id }}</td>\r\n          <td>{{ u.nombre }}</td>\r\n          <td>{{ u.email }}</td>\r\n          <td>{{ u.telefono || \"-\" }}</td>\r\n          <td>\r\n            @if (u.fechaRegistro) {\r\n            {{ u.fechaRegistro | date:'dd/MM/yyyy HH:mm' }}\r\n            } @else {\r\n            -\r\n            }\r\n          </td>\r\n          <td>\r\n            @if (u.rol) {\r\n            <span class=\"rol-badge\" [class]=\"u.rol.toLowerCase()\">\r\n              {{ u.rol }}\r\n            </span>\r\n            } @else {\r\n            <span>-</span>\r\n            }\r\n          </td>\r\n          <td>\r\n            <div class=\"acciones\">\r\n              <button class=\"btn-editar\" (click)=\"editar(u)\">\r\n                ‚úèÔ∏è Editar\r\n              </button>\r\n              <button class=\"btn-eliminar\" (click)=\"eliminar(u.id!)\">\r\n                üóëÔ∏è Eliminar\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        }\r\n      </tbody>\r\n    </table>\r\n    }\r\n  </div>\r\n  }\r\n</div>"],
  "mappings": "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",
  "names": []
}
